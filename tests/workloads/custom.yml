# This file is an example YCSBR workload configuration file. You can create a
# workload from this configuration using
# `ycsbr::gen::PhasedWorkload::LoadFrom()`.

# Set the size of the records that will be used in the workload. All records
# will have an 8 byte key (64-bit unsigned integer), so this size must be at
# least 9.
record_size_bytes: 16

# Configures the records that should be loaded before the workload runs. The
# supported distributions are (i) uniform, and (ii) hotspot. For both uniform
# and hotspot, you must specify a range (inclusive) for the keys. For hotspot
# distributions, you must also specify an inclusive hot range that must lie
# inside the overall range. You also need to specify a hot proportion
# percentage (how many of the inserts should appear inside the hot range).
load:
  num_records: 10
  distribution:
    type: uniform
    range_min: 100
    range_max: 1000000

# If you want to use a custom dataset, specify the load distribution type as
# "custom". Then in your code, you need to call
# `PhasedWorkload::SetCustomLoadDataset()` before starting the workload.
#
# load:
#   distribution:
#     type: custom

# Configures the workload phases. There can be at most 255 phases. When running
# with more than one thread, the number of requests will be divided equally
# among all the threads.
#
# If any operation type is not specified in a phase, its proportion percentage
# is assumed to be 0%.
run:
- num_requests: 20
  # For read, readmodifywrite, update, and scan operations, the allowed
  # distributions are (i) uniform, and (ii) zipfian. For zipfian, you must
  # choose a theta, which represents the skew. We only support values of theta
  # in the exclusive range (0, 1). A larger value of theta means there is more
  # skew.
  #
  # A read-modify-write consists of a point read followed by a point update for
  # the same key. Even though a read-modify-write consists of 2 physical
  # requests, we count it as 1 "logical" request towards the total
  # `num_requests` specified above. This is the same behavior as the YCSB driver.
  read:
    proportion_pct: 50
    distribution:
      type: zipfian
      theta: 0.99
  readmodifywrite:
    proportion_pct: 5
    distribution:
      type: uniform
  update:
    proportion_pct: 25
    distribution:
      type: uniform
  scan:
    proportion_pct: 10
    # For scans, you need to specify the maximum scan length. The scan length
    # will be selected uniformly from the range [1, max_length].
    max_length: 1000
    distribution:
      type: uniform

  # For inserts, the supported distributions are the same as for the "load"
  # configuration above.
  insert:
    proportion_pct: 10
    distribution:
      type: hotspot
      range_min: 1000
      range_max: 2000
      hot_proportion_pct: 90
      hot_range_min: 1100
      hot_range_max: 1200
